{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{186:function(t,e,a){\"use strict\";a.r(e);var i=a(0),s=Object(i.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"content\"},[t._m(0),t._v(\" \"),a(\"p\",[a(\"router-link\",{attrs:{to:\"/note/demo/jigsaw.html\"}},[t._v(\"点击跳转\")])],1),t._v(\" \"),t._m(1),t._v(\" \"),t._m(2),t._v(\" \"),t._m(3),t._v(\" \"),a(\"ol\",{attrs:{start:\"2\"}},[t._m(4),t._v(\" \"),a(\"li\",[t._v(\"详细原理请点击：\"),a(\"a\",{attrs:{href:\"http://www.woshipm.com/rp/340913.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"跳转\"),a(\"OutboundLink\")],1)])]),t._v(\" \"),t._m(5),t._v(\" \"),t._m(6),t._v(\" \"),t._m(7),t._m(8),t._v(\" \"),t._m(9),t._v(\" \"),t._m(10),t._m(11),t._v(\" \"),t._m(12),t._v(\" \"),t._m(13),t._m(14),t._v(\" \"),t._m(15),t._m(16),t._v(\" \"),t._m(17),t._v(\" \"),t._m(18),t._m(19),t._v(\" \"),t._m(20),t._v(\" \"),t._m(21),t._m(22),t._v(\" \"),t._m(23),a(\"ol\",{attrs:{start:\"11\"}},[a(\"li\",[a(\"p\",[t._v(\"源码地址 \"),a(\"a\",{attrs:{href:\"https://github.com/chenyejun/jigsaw_same\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"点击访问\"),a(\"OutboundLink\")],1)])]),t._v(\" \"),t._m(24)])])},[function(){var t=this.$createElement,e=this._self._c||t;return e(\"h4\",{attrs:{id:\"_1-游戏访问连接\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-游戏访问连接\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" 1. 游戏访问连接\")])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"h4\",{attrs:{id:\"_2-九宫格拼图原理\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-九宫格拼图原理\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" 2. 九宫格拼图原理\")])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"ol\",[e(\"li\",[this._v(\"图例原理：\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"p\",[e(\"img\",{attrs:{src:\"https://note.youdao.com/yws/api/personal/file/A02CD4255D0D44C688AEE3A793B4FEAB?method=download&shareKey=2021a12838c8e08ba8179359679fc69f\",alt:\"image\"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"li\",[t._v(\"上图的九宫格图例，每个格子都有一个(x,y)的坐标，假如格子9是空白格子，怎么知道6和8是它的直接相邻格子呢。这时候就体现出格子坐标(x,y)的作用了， 使用公式：|(x\"),a(\"sub\",[t._v(\"6\")]),t._v(\" - x\"),a(\"sub\",[t._v(\"9\")]),t._v(\")| + |(y\"),a(\"sub\",[t._v(\"6\")]),t._v(\" - y\"),a(\"sub\",[t._v(\"9\")]),t._v(\")| = 1，将空白格子9的坐标与格子6的坐标进行对应坐标的差值的绝对值的和等于1，就证明它们是直接相邻格子，可进行移动互换。\")])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"h4\",{attrs:{id:\"_3-实现过程，代码分析\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-实现过程，代码分析\",\"aria-hidden\":\"true\"}},[this._v(\"#\")]),this._v(\" 3. 实现过程，代码分析\")])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"ol\",[e(\"li\",[this._v(\"flex实现九宫格布局：\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[this._v(\"<style>\\n  .jigsaw {\\n    margin-top: 15px;\\n  }\\n  .jigsaw .ul{\\n    display: flex;\\n    flex-wrap: wrap; // 换行\\n  }\\n  \\n  .ul .child {\\n    width: 33.3%;\\n    color: rgba(255, 255, 255, 0.5);\\n    background-repeat: no-repeat;\\n  }\\n</style>\\n<section class='jigsaw'>\\n    <ul class=\\\"ul\\\">\\n        <li class=\\\"child\\\" data-x='1' data-y='1' style=\\\"order:1\\\">1</li>\\n        <li class=\\\"child\\\" data-x='2' data-y='1' style=\\\"order:2\\\">2</li>\\n        <li class=\\\"child\\\" data-x='3' data-y='1' style=\\\"order:3\\\">3</li>\\n        <li class=\\\"child\\\" data-x='1' data-y='2' style=\\\"order:4\\\">4</li>\\n        <li class=\\\"child\\\" data-x='2' data-y='2' style=\\\"order:5\\\">5</li>\\n        <li class=\\\"child\\\" data-x='3' data-y='2' style=\\\"order:6\\\">6</li>\\n        <li class=\\\"child\\\" data-x='1' data-y='3' style=\\\"order:7\\\">7</li>\\n        <li class=\\\"child\\\" data-x='2' data-y='3' style=\\\"order:8\\\">8</li>\\n        <li class=\\\"child\\\" data-x='3' data-y='3' style=\\\"order:9\\\" id='empty'>9</li>\\n    </ul>\\n</section>\\n\")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"ol\",{attrs:{start:\"2\"}},[e(\"li\",[this._v(\"现在的布局是这样子的：\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"p\",[e(\"img\",{attrs:{src:\"https://note.youdao.com/yws/api/personal/file/E90D977A12364AD7828493130A43D0DF?method=download&shareKey=6e3fe53b7d557cf9f4f02f35dadd8fa0\",alt:\"image\"}}),this._v(\"\\n3. 分析：每个li代表一个格子，自定义属性data-x和data-y代表坐标(x, y)；而样式order用于对格子进行移动排序；格子9添加id='empty'用于标识为空白格子。\\n4. 因为格子的宽度是通过百分比设置的，会根据不同屏幕宽度的变化而变化；而且我们需要正方形的小格子，所以格子的高度需要js动态计算：\")])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[this._v(\"// 设置格子的高度、背景图片的尺寸\\nsetChildStyle() {\\n  this.childWidth = window.getComputedStyle(this.oChild[0], false).width; // 获取格子宽度\\n  console.log(this.childWidth);\\n  for (let i = 0; i < this.oChild.length; i++) {\\n    this.oChild[i].style.height = `${this.childWidth}`;\\n  }\\n}\\n\")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"ol\",{attrs:{start:\"5\"}},[e(\"li\",[this._v(\"现在变成\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"p\",[e(\"img\",{attrs:{src:\"https://note.youdao.com/yws/api/personal/file/B54851A8674043FAAD84DD21A13C76B9?method=download&shareKey=17225e079853f454ae7769df2bd80765\",alt:\"image\"}}),this._v(\"\\n6. 现在给每个格子设置背景图片的尺寸（background-size），将格子的background-size的宽度设置成格子父节点ul的宽度，高度为auto，然后通过backgound-position进行定位，用格子的背景拼凑成一张完整的图片\")])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[this._v(\"setChildStyle() {\\n  this.childWidth = window.getComputedStyle(this.oChild[0], false).width;\\n  console.log(this.childWidth);\\n  for (let i = 0; i < this.oChild.length; i++) {\\n     this.oChild[i].style.height = `${this.childWidth}`;\\n     this.oChild[i].style.backgroundSize = `${this.ulWidth} auto`;\\n     this.setBgpositon(this.oChild[i]);\\n  }\\n}\\n\")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"ol\",{attrs:{start:\"7\"}},[e(\"li\",[this._v(\"其实每个格子的背景图片都是同一张，只不过是通过background-position 对背景图片进行定位，让每个格子只显示图片背景的九分之一，\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[this._v(\"// 设置背景图在格子的位置\\nsetBgpositon(chiObj) {\\n  let x = chiObj.getAttribute('data-x') - 1;\\n  let y = chiObj.getAttribute('data-y') - 1;\\n  chiObj.style.backgroundPosition = `${-x*parseInt(this.childWidth)}px ${-y*parseInt(this.childWidth)}px`;\\n}\\n\")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"p\",[this._v(\"如下图视：\\n\"),e(\"img\",{attrs:{src:\"https://note.youdao.com/yws/api/personal/file/FD88F82036644EABBF2464869E9E4836?method=download&shareKey=e886829b55cc3883ec63d42817f1c324\",alt:\"image\"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"ol\",{attrs:{start:\"8\"}},[e(\"li\",[this._v(\"设置默认背景图片后：\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[this._v(\"// 设置格子的背景图片\\nsetBgImg(imgUrl) {\\n  for (let i = 0; i < this.oChild.length - 1; i++) {\\n    this.oChild[i].style.backgroundImage = `url(${imgUrl})`;\\n  }\\n}\\n\")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"p\",[e(\"img\",{attrs:{src:\"https://note.youdao.com/yws/api/personal/file/F28AF40EDE0F400AA5460DB6DD45AD11?method=download&shareKey=07162daa6237872246dee59154f1dfb6\",alt:\"image\"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"ol\",{attrs:{start:\"9\"}},[e(\"li\",[this._v(\"接下来把格子撸成可移动的，与空白格子直接相邻的格子都可以与空白格子换位，一开始的order样式就起作用了。点击格子，首先比较该格子是否与空白格子直接相邻，如果是就交换格子的data-x、data-y和order值进行换位：\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[this._v(\"childEvent() {\\n  let that = this;\\n  let oEmptyChild = document.getElementById('empty'); // 获取空白的格子对象\\n  this.oUl[0].addEventListener('click', function(ev){\\n    let target = ev.target;\\n    let targetX, targetY, targetOrder;\\n    let iEmptyX, iEmptyY, iEmptyOrder;\\n    if (target.className != 'child' ) return false;\\n    iEmptyX = oEmptyChild.getAttribute('data-x');\\n    iEmptyY = oEmptyChild.getAttribute('data-y');\\n    iEmptyOrder = window.getComputedStyle(oEmptyChild, false).order;\\n    targetX = target.getAttribute('data-x');\\n    targetY = target.getAttribute('data-y');\\n    targetOrder = window.getComputedStyle(target, false).order;\\n    if (Math.abs(targetX - iEmptyX) + Math.abs(targetY - iEmptyY) == 1) {\\n      // data-x data-y order 值互换\\n      [iEmptyX, targetX] = [targetX, iEmptyX];\\n      [iEmptyY, targetY] = [targetY, iEmptyY];\\n      [iEmptyOrder, targetOrder] = [targetOrder, iEmptyOrder];\\n\\n      oEmptyChild.setAttribute('data-x', iEmptyX);\\n      oEmptyChild.setAttribute('data-y', iEmptyY);\\n      oEmptyChild.style.order = iEmptyOrder;\\n      target.setAttribute('data-x', targetX);\\n      target.setAttribute('data-y', targetY);\\n      target.style.order = targetOrder;\\n    }\\n  }, false);\\n}\\n\")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"ol\",{attrs:{start:\"10\"}},[e(\"li\",[this._v(\"接下来是把上传的img图片设置成格子背景，通过监听input type='file'的change事件来获取图片文件files：\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[this._v(\"imgEvent() {\\n  let that = this;\\n  this.oFile.addEventListener('change', function(){\\n    let imgUrl = window.URL.createObjectURL(this.files[0]); // 该方法将files转换成img可访问的本地路径\\n    that.oImg.setAttribute('src', imgUrl);\\n    that.oImg.onload = function() {\\n      that.setBgImg(imgUrl); // 重新设置格子背景\\n    }\\n  }, false);\\n}\\n\")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"li\",[e(\"p\",[this._v(\"（完）\")])])}],!1,null,null,null);s.options.__file=\"JigsawGame.md\";e.default=s.exports}}]);","extractedComments":[]}